#!/bin/sh
./todo/update-qtpy ~/src/python/qtpy
make check
./todo/set-version vA.B.C
./todo/commit-version
# remove any (BETA) markers from the release notes
./todo/tag [vA.B.C (optional)]
vx env3 make develop
git cola push

# vx env3 pypi-secure-upload
rm -rf build dist
vx env3 python setup.py build
vx env3 python -m build -n .
for filename in dist/*.whl dist/*.gz
do
    vx env3 python -m twine upload --sign "$filename"
done

# Create installers and upload.
rm -rf build dist
vx env3 ./todo/release --all

# Update git-cola.github.io
vim pages/_config.yaml
vx env3 ./todo/github.io.sh
